(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["reporteGeneral"],{"7bfe":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("841c");var n=a("7a23"),i=Object(n["k"])("h3",null,"Citas Telefónicas",-1),c=Object(n["k"])("h5",null,"Si desea buscar por Fecha de Gestión pulsa aquí:",-1),o={class:"row text-center ml-3 mt-3"},l={class:"col-md-3"},r={class:"col-auto"},s={class:"card mt-3"},d={class:"row g-3"},u={class:"col-auto align-self-start"},h={class:"col-auto"},f={class:"col-auto flex-right"},O={class:"p-input-icon-left"},b=Object(n["k"])("i",{class:"pi pi-search"},null,-1),p=Object(n["j"])(" No existen datos "),C=Object(n["j"])(" Cargando información. Por favor espere. "),T={class:"pi pi-info-circle",style:{fontsize:"2rem"}};function j(e,t,a,j,m,D){var S=Object(n["A"])("Toast"),E=Object(n["A"])("Panel"),k=Object(n["A"])("InputSwitch"),g=Object(n["A"])("Calendar"),N=Object(n["A"])("Button"),v=Object(n["A"])("InputText"),G=Object(n["A"])("Column"),y=Object(n["A"])("DataTable"),I=Object(n["B"])("tooltip");return Object(n["u"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(S),Object(n["k"])(E,null,{default:Object(n["J"])((function(){return[i]})),_:1}),Object(n["k"])(E,null,{default:Object(n["J"])((function(){return[Object(n["k"])("div",null,[c,Object(n["k"])(k,{modelValue:m.searchFechaGestion,"onUpdate:modelValue":t[1]||(t[1]=function(e){return m.searchFechaGestion=e})},null,8,["modelValue"])]),Object(n["k"])("div",o,[Object(n["k"])("div",l,[Object(n["k"])(g,{id:"icon",modelValue:m.DaysSelect,"onUpdate:modelValue":t[2]||(t[2]=function(e){return m.DaysSelect=e}),minDate:m.minDate,maxDate:m.maxDate,showIcon:!0,selectionMode:"range",manualInput:!1,dateFormat:"dd/mm",panelClass:"p-calendar",placeholder:m.searchFechaGestion?"Seleccione Fecha Cita":"Seleccione Fecha Gestión",class:"col-md-12"},null,8,["modelValue","minDate","maxDate","placeholder"])]),Object(n["k"])("div",r,[Object(n["k"])(N,{label:"Enviar",onClick:t[3]||(t[3]=function(e){return D.getCitas()})})])]),Object(n["k"])("div",s,[Object(n["k"])(y,{value:m.citas,dataKey:"id",loading:m.loading,filterDisplay:"menu",paginator:!0,onPage:t[7]||(t[7]=function(e){return D.onPage(e)}),rows:5,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown ",rowsPerPageOptions:[5,10,20,50],responsiveLayout:"scroll",currentPageReportTemplate:" Del {first} al {last} de {totalRecords}",stripedRows:"",ref:"dt",totalRecords:m.totalRecords,lazy:!0,scrollHeight:"600px",class:"p-datatable-sm",rowHover:"",autoLayout:!0},{header:Object(n["J"])((function(){return[Object(n["k"])("div",d,[Object(n["k"])("div",u,[Object(n["k"])(N,{icon:"pi pi-external-link",label:"Export excel",onClick:D.exportExcel},null,8,["onClick"])]),Object(n["k"])("div",h,[Object(n["k"])(N,{type:"button",icon:"pi pi-filter-slash",label:"Clear",class:"p-button-outlined",onClick:t[4]||(t[4]=function(e){return D.clearFilter1()})})]),Object(n["k"])("div",f,[Object(n["k"])("span",O,[b,Object(n["k"])(v,{modelValue:m.search,"onUpdate:modelValue":t[5]||(t[5]=function(e){return m.search=e}),placeholder:"Buscar",onChange:t[6]||(t[6]=function(e){return D.onChange()})},null,8,["modelValue"])])])])]})),empty:Object(n["J"])((function(){return[p]})),loading:Object(n["J"])((function(){return[C]})),paginatorLeft:Object(n["J"])((function(){return[Object(n["k"])(N,{type:"button",icon:"pi pi-refresh",class:"p-button-text"})]})),paginatorRight:Object(n["J"])((function(){return[Object(n["k"])(N,{type:"button",icon:"pi pi-cloud",class:"p-button-text"})]})),default:Object(n["J"])((function(){return[Object(n["k"])(G,{field:"DOCUMENTO",header:"Documento",frozen:""}),Object(n["k"])(G,{field:"TM15NDEUOPE",header:"Operacion"}),Object(n["k"])(G,{field:"TM07SCOSDES",header:"Cosecha"}),Object(n["k"])(G,{field:"MONEDADEUDA",header:"Moneda"}),Object(n["k"])(G,{field:"TM15NDEUCAPINI",header:"Capital Inicial"}),Object(n["k"])(G,{field:"TM15NDEUCAPINI_SOL",header:"Capital Inicial Soles"}),Object(n["k"])(G,{field:"TG01SGENDES_REACT",header:"Reacción"}),Object(n["k"])(G,{field:"TG01SGENDES_CONT",header:"Contacto"}),Object(n["k"])(G,{field:"TG01SGENDES_TIPCONT_ABR",header:"Tipo Contacto"}),Object(n["k"])(G,{field:"CANAL",header:"Canal"}),Object(n["k"])(G,{field:"VSUPERVISOR",header:"Supervisor"}),Object(n["k"])(G,{field:"VGESTOR",header:"Gestor"}),Object(n["k"])(G,{field:"NIVEL",header:"Nivel"}),Object(n["k"])(G,{field:"GESTORGESTION",header:"Gestor Gestión"}),Object(n["k"])(G,{field:"TT01SGESOBS",header:"Observación"},{body:Object(n["J"])((function(e){return[Object(n["K"])(Object(n["k"])("i",T,null,512),[[I,e.data.TT01SGESOBS,void 0,{top:!0}]])]})),_:1}),Object(n["k"])(G,{field:"TM09SDTCVAL_TEL",header:"Teléfono"}),Object(n["k"])(G,{field:"NOMCAMPANA",header:"Campaña"}),Object(n["k"])(G,{field:"TT01DGESFEC",header:"Fecha Gestión"}),Object(n["k"])(G,{field:"TT01DGESCIT",header:"Fecha Cita"}),Object(n["k"])(G,{field:"CALIFICACION",header:"Calificación"}),Object(n["k"])(G,{field:"TT03NMONTOTOTPAGO_MES",header:"Monto Pago Mes"}),Object(n["k"])(G,{field:"TG01SGENDES_ULT_SIT_NEG",header:"Ult. situación de Negociación"}),Object(n["k"])(G,{field:"INTENSIDAD",header:"Intensidad"}),Object(n["k"])(G,{field:"FRECUENCIA",header:"Frecuencia"})]})),_:1},8,["value","loading","totalRecords"])])]})),_:1})],64)}a("1276"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5319"),a("d81d");var m=a("cb8b"),D=a("5b2c"),S=a("d4ec"),E=a("bee2"),k=a("bc3a"),g=a.n(k),N=function(){function e(){Object(S["a"])(this,e)}return Object(E["a"])(e,[{key:"getCitasLazy",value:function(e){return g.a.post("/api/listarCitas",e).then((function(e){return e}))}},{key:"getCitas",value:function(e,t,a,n){return g.a.post("/api/asyncListarCitas/"+e+"/"+t+"/"+a,n).then((function(e){return e}))}},{key:"downloadCitas",value:function(e){return g.a.post("/api/downloadCitas",e,{responseType:"blob"}).then((function(e){return e}))}}]),e}(),v=a("6b8c"),G=a("c1df"),y=a.n(G),I=a("0393"),A=a("f4ad"),P={components:{Calendar:m["a"],DataTable:D["a"],InputSwitch:A["a"]},directives:{tooltip:v["a"],primeIcons:I["d"]},data:function(){return{DaysSelect:[],minDate:null,maxDate:null,loading:!1,citas:null,search:null,totalRecords:0,formattedDate:null,formattedDateFin:null,searchFechaGestion:!1,totalFilter:0}},ReporteGeneralService:null,created:function(){var e=new Date;this.minDate=new Date(e.getFullYear(),e.getMonth()-1,1),this.maxDate=new Date(e.getFullYear(),e.getMonth()+1,0),this.ReporteGeneralService=new N},mounted:function(){this.lazyParams={page:0,rows:this.$refs.dt.rows},this.getCitas()},methods:{getCitas:function(){var e=this,t=this,a=new Date,n=new Date(a.getFullYear(),a.getMonth(),1),i=a;0!=t.DaysSelect.length?(n=t.DaysSelect[0],i=t.DaysSelect[1]):(t.DaysSelect[0]=n,t.DaysSelect[1]=i),void 0!=n&&void 0!=i&&(t.loading=!0,this.formattedDate=y()(n).format("YYYY-MM-DD"),this.formattedDateFin=y()(i).format("YYYY-MM-DD"),this.ReporteGeneralService.getCitas(this.formattedDate,this.formattedDateFin,this.searchFechaGestion,t.lazyParams).then((function(t){var a=t.data;e.citas=a.data,e.totalRecords=a.totalRecords,e.loading=!1})))},getCitasLazy:function(){var e=this,t=this;this.loading=!0,this.ReporteGeneralService.getCitasLazy(t.lazyParams).then((function(t){var a=t.data;e.citas=a.data,e.totalRecords=null==a.totalFilter?a.totalRecords:a.totalFilter,e.loading=!1}))},clearFilter1:function(){this.initFilters1(),this.getCitasLazy()},initFilters1:function(){this.search=null,this.lazyParams.search=null},onPage:function(e){this.lazyParams=e,this.lazyParams.search=this.search,this.getCitasLazy()},onChange:function(){this.lazyParams.search=this.search,this.getCitasLazy()},exportExcel:function(){var e=this;this.ReporteGeneralService.downloadCitas(this.lazyParams).then((function(t){console.log(t);var a=t.headers["content-disposition"],n=a?a.substr(a.indexOf("filename")):"",i=n?n.split("=")[1]:"";if(i.substr(i.indexOf("."))){var c=new Blob([t.data],{type:"application/x-download;charset=utf-8"}),o=document.createElement("a"),l=window.URL.createObjectURL(c);o.href=l,o.download=decodeURIComponent(i.replace("_","")),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(l)}else e.$notify({"título":"Prompt",mensaje:"No hay datos que desee",type:"error"})}))},exportExcelTemp:function(){var e=this;this.habilitarExcel?Promise.all([a.e("chunk-067df354"),a.e("chunk-2d0d5ff1")]).then(function(){var t=a("42f0"),n=t.export_json_to_excel,i=["Documento","Operación","Cosecha","Moneda","Capital Inicial","Capital Inicial Soles","Reacción","Contacto","Tipo Contacto","Canal","Supervisor","Gestor","Nivel","Gestion Gestión","Observación","Teléfono","Campaña","Fecha de Gestión","Fecha de Cita","Calificación","Monto Pago Mes","Ultima Situación de Negociación","Intesidad","Frecuencia"],c=["DOCUMENTO","TM15NDEUOPE","TM07SCOSDES","MONEDADEUDA","TM15NDEUCAPINI","TM15NDEUCAPINI_SOL","TG01SGENDES_REACT","TG01SGENDES_CONT","TG01SGENDES_TIPCONT_ABR","CANAL","VSUPERVISOR","VGESTOR","NIVEL","GESTORGESTION","TT01SGESOBS","TM09SDTCVAL_TEL","NOMCAMPANA","TT01DGESFEC","TT01DGESCIT","CALIFICACION","TT03NMONTOTOTPAGO_MES","TG01SGENDES_ULT_SIT_NEG","INTENSIDAD","FRECUENCIA"],o=e.allCitas;if(void 0!=o&&0!=o.length){var l=e.formatJson(c,o),r=y()(e.minDate).format("DD/MM"),s=y()(e.maxDate).format("DD/MM");n(i,l,"Reporte Citas Tel "+r+" al "+s)}}.bind(null,a)).catch(a.oe):this.$toast.add({severity:"warn",summary:"Atención",detail:"Datos en proceso de descarga",life:3e3})},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))}}};P.render=j;t["default"]=P},dda8:function(e,t,a){"use strict";a.r(t);var n=a("7a23");function i(e,t,a,i,c,o){return Object(n["u"])(),Object(n["g"])("div",null,"Usuario no existe")}var c={created:function(){},watch:{},props:{},methods:{}};c.render=i;t["default"]=c}}]);
//# sourceMappingURL=reporteGeneral.5c8bd219.js.map