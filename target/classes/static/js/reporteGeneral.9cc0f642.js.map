{"version":3,"sources":["webpack:///./src/views/ReporteCitasTel.vue","webpack:///./src/service/ReporteGeneralService.js","webpack:///./src/views/ReporteCitasTel.vue?8dbc","webpack:///./src/views/Error.vue","webpack:///./src/views/Error.vue?887d"],"names":["class","style","textSearch","searchFechaGestion","user","rolJefatura","searchAll","id","DaysSelect","minDate","maxDate","showIcon","selectionMode","manualInput","dateFormat","panelClass","placeholder","label","getCitas","value","citas","dataKey","loading","filterDisplay","paginator","onPage","$event","rows","paginatorTemplate","rowsPerPageOptions","responsiveLayout","currentPageReportTemplate","stripedRows","ref","totalRecords","lazy","scrollHeight","rowHover","autoLayout","header","icon","exportExcel","type","clearFilter1","search","onChange","empty","paginatorLeft","paginatorRight","field","frozen","body","slotProps","data","TT01SGESOBS","ReporteGeneralService","dataTableLazy","axios","post","then","res","formattedDate","formattedDateFin","searchFechaCita","responseType","components","Calendar","DataTable","InputSwitch","directives","tooltip","primeIcons","totalFilter","created","today","Date","this","getFullYear","getMonth","app","appContext","config","globalProperties","$userSession","rolGeneral","mounted","lazyParams","page","$refs","dt","methods","$vue","date1","date2","length","undefined","format","searchType","getCitasLazy","initFilters1","event","downloadCitas","response","console","log","disposition","headers","fileInfo","substr","indexOf","fileName","split","blob","Blob","downloadElement","document","createElement","href","window","URL","createObjectURL","download","decodeURIComponent","replace","appendChild","click","removeChild","revokeObjectURL","$notify","título","mensaje","render","watch","props"],"mappings":"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","file":"js/reporteGeneral.9cc0f642.js","sourcesContent":["<template class=\"container\">\r\n  <Toast />\r\n  <Panel>\r\n    <h3>Citas Telefónicas</h3>\r\n  </Panel>\r\n\r\n  <Panel>\r\n    <div>\r\n      <h5>{{textSearch}}</h5>\r\n      <InputSwitch v-model=\"searchFechaGestion\" />\r\n    </div>\r\n     <div v-if=\"user.rolJefatura\">\r\n      <h5>Si desea buscar todos los registros pulsa aquí:</h5>\r\n      <InputSwitch v-model=\"searchAll\" />\r\n    </div>\r\n    <div class=\"row text-center ml-3 mt-3\">\r\n      <div class=\"col-md-3\">\r\n        <Calendar\r\n          id=\"icon\"\r\n          v-model=\"DaysSelect\"\r\n          :minDate=\"minDate\"\r\n          :maxDate=\"maxDate\"\r\n          :showIcon=\"true\"\r\n          selectionMode=\"range\"\r\n          :manualInput=\"false\"\r\n          dateFormat=\"dd/mm\"\r\n          panelClass=\"p-calendar\"\r\n          :placeholder=\"\r\n            searchFechaGestion\r\n              ? 'Seleccione Fecha Cita'\r\n              : 'Seleccione Fecha Gestión'\r\n          \"\r\n          class=\"col-md-12\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"col-auto\">\r\n        <Button label=\"Enviar\" @click=\"getCitas()\" />\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"card mt-3\">\r\n      <DataTable\r\n        :value=\"citas\"\r\n        dataKey=\"id\"\r\n        :loading=\"loading\"\r\n        filterDisplay=\"menu\"\r\n        :paginator=\"true\"\r\n        @page=\"onPage($event)\"\r\n        :rows=\"5\"\r\n        paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown \"\r\n        :rowsPerPageOptions=\"[5, 10, 20, 50]\"\r\n        responsiveLayout=\"scroll\"\r\n        currentPageReportTemplate=\" Del {first} al {last} de {totalRecords}\"\r\n        stripedRows\r\n        ref=\"dt\"\r\n        :totalRecords=\"totalRecords\"\r\n        :lazy=\"true\"\r\n        scrollHeight=\"600px\"\r\n        class=\"p-datatable-sm\"\r\n        rowHover\r\n        :autoLayout=\"true\"\r\n      >\r\n        <template #header>\r\n          <div class=\"row g-3\">\r\n            <div class=\"col-auto align-self-start\">\r\n              <Button\r\n                icon=\"pi pi-external-link\"\r\n                label=\"Export excel\"\r\n                @click=\"exportExcel\"\r\n              />\r\n            </div>\r\n            <div class=\"col-auto\">\r\n              <Button\r\n                type=\"button\"\r\n                icon=\"pi pi-filter-slash\"\r\n                label=\"Clear\"\r\n                class=\"p-button-outlined\"\r\n                @click=\"clearFilter1()\"\r\n              />\r\n            </div>\r\n            <div class=\"col-auto flex-right\">\r\n              <span class=\"p-input-icon-left\">\r\n                <i class=\"pi pi-search\" />\r\n                <InputText\r\n                  v-model=\"search\"\r\n                  placeholder=\"Buscar\"\r\n                  @change=\"onChange()\"\r\n                />\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n        <template #empty> No existen datos </template>\r\n        <template #loading> Cargando información. Por favor espere. </template>\r\n        <!-- DOCUMENTO -->\r\n        <Column field=\"DOCUMENTO\" header=\"Documento\" frozen> </Column>\r\n        <Column field=\"TM15NDEUOPE\" header=\"Operacion\"></Column>\r\n        <Column field=\"TM07SCOSDES\" header=\"Cosecha\"></Column>\r\n        <Column field=\"MONEDADEUDA\" header=\"Moneda\"></Column>\r\n        <Column field=\"TM15NDEUCAPINI\" header=\"Capital Inicial\"></Column>\r\n        <Column\r\n          field=\"TM15NDEUCAPINI_SOL\"\r\n          header=\"Capital Inicial Soles\"\r\n        ></Column>\r\n        <Column field=\"TG01SGENDES_REACT\" header=\"Reacción\"></Column>\r\n        <Column field=\"TG01SGENDES_CONT\" header=\"Contacto\"></Column>\r\n        <Column field=\"TG01SGENDES_TIPCONT_ABR\" header=\"Tipo Contacto\"></Column>\r\n        <Column field=\"CANAL\" header=\"Canal\"></Column>\r\n        <Column field=\"VSUPERVISOR\" header=\"Supervisor\"></Column>\r\n        <Column field=\"VGESTOR\" header=\"Gestor\"></Column>\r\n        <Column field=\"NIVEL\" header=\"Nivel\"></Column>\r\n        <Column field=\"GESTORGESTION\" header=\"Gestor Gestión\"></Column>\r\n        <Column field=\"TT01SGESOBS\" header=\"Observación\">\r\n          <template #body=\"slotProps\">\r\n            <i\r\n              class=\"pi pi-info-circle\"\r\n              style=\"fontsize: 2rem\"\r\n              v-tooltip.top=\"slotProps.data.TT01SGESOBS\"\r\n            ></i>\r\n          </template>\r\n        </Column>\r\n        <Column field=\"TM09SDTCVAL_TEL\" header=\"Teléfono\"></Column>\r\n        <Column field=\"NOMCAMPANA\" header=\"Campaña\"></Column>\r\n        <Column field=\"TT01DGESFEC\" header=\"Fecha Gestión\"></Column>\r\n        <Column field=\"TT01DGESCIT\" header=\"Fecha Cita\"></Column>\r\n        <Column field=\"CALIFICACION\" header=\"Calificación\"></Column>\r\n        <Column field=\"TT03NMONTOTOTPAGO_MES\" header=\"Monto Pago Mes\"></Column>\r\n        <Column\r\n          field=\"TG01SGENDES_ULT_SIT_NEG\"\r\n          header=\"Ult. situación de Negociación\"\r\n        ></Column>\r\n        <Column field=\"INTENSIDAD\" header=\"Intensidad\"></Column>\r\n        <Column field=\"FRECUENCIA\" header=\"Frecuencia\"></Column>\r\n        <Column field=\"ACCIONRESULCIT\" header=\"Resultado Acción Cita\"></Column>\r\n        <Column field=\"REACCIONRESULCIT\" header=\"Resultado Reacción Cita\"></Column>\r\n        <Column field=\"CONTACTORESULTCIT\" header=\"Resultado Contacto Cita\"></Column>\r\n        <Column field=\"OBSERVACIONRESULCIT\" header=\"Resultado Observación Cita\"></Column>\r\n        <Column field=\"TELEFONORESULCIT\" header=\"Resultado Telefono Cita\"></Column>\r\n        <template #paginatorLeft>\r\n          <Button type=\"button\" icon=\"pi pi-refresh\" class=\"p-button-text\" />\r\n        </template>\r\n        <template #paginatorRight>\r\n          <Button type=\"button\" icon=\"pi pi-cloud\" class=\"p-button-text\" />\r\n        </template>\r\n      </DataTable>\r\n    </div>\r\n  </Panel>\r\n</template>\r\n\r\n<script>\r\nimport Calendar from \"primevue/calendar\";\r\nimport DataTable from \"primevue/datatable\";\r\nimport ReporteGeneralService from \"../service/ReporteGeneralService\";\r\nimport Tooltip from \"primevue/tooltip\";\r\nimport moment from \"moment\";\r\nimport { PrimeIcons } from \"primevue/api\";\r\nimport InputSwitch from \"primevue/inputswitch\";\r\nimport { getCurrentInstance } from 'vue';\r\nexport default {\r\n  components: {\r\n    Calendar,\r\n    DataTable,\r\n    InputSwitch,\r\n  },\r\n  directives: {\r\n    tooltip: Tooltip,\r\n    primeIcons: PrimeIcons,\r\n  },\r\n  data() {\r\n    return {\r\n      DaysSelect: [],\r\n      minDate: null,\r\n      maxDate: null,\r\n      loading: false,\r\n      citas: null,\r\n      search: null,\r\n      totalRecords: 0,\r\n      formattedDate: null,\r\n      formattedDateFin: null,\r\n      searchFechaGestion: false,\r\n      searchAll: false,\r\n      totalFilter: 0,\r\n      user:{},\r\n      textSearch:\"\"\r\n    };\r\n  },\r\n  ReporteGeneralService: null,\r\n  created() {\r\n    let today = new Date();\r\n    this.minDate = new Date(today.getFullYear(), today.getMonth() - 1, 1);\r\n    this.maxDate = new Date(today.getFullYear(), today.getMonth() + 1, 0);\r\n    this.ReporteGeneralService = new ReporteGeneralService();\r\n    \r\n    const app =  getCurrentInstance();\r\n    this.user = app.appContext.config.globalProperties.$userSession;\r\n    this.textSearch = this.user.rolJefatura || this.user.rolGeneral ? \"Si desea buscar por Fecha de Cita pulsa aquí:\" : \"Si desea buscar por Fecha de Gestión pulsa aquí:\"\r\n   \r\n },\r\n  mounted() {\r\n    this.lazyParams = {\r\n      page: 0,\r\n      rows: this.$refs.dt.rows,\r\n    };\r\n    this.getCitas();\r\n  },\r\n  methods: {\r\n    getCitas() {\r\n      let $vue = this;\r\n      let today = new Date();\r\n      var date1 = new Date(today.getFullYear(), today.getMonth(), 1);\r\n      var date2 = today;\r\n      if ($vue.DaysSelect.length != 0) {\r\n        date1 = $vue.DaysSelect[0];\r\n        date2 = $vue.DaysSelect[1];\r\n      } else {\r\n        $vue.DaysSelect[0] = date1;\r\n        $vue.DaysSelect[1] = date2;\r\n      }\r\n\r\n      if (date1 == undefined || date2 == undefined) {\r\n        return;\r\n      }\r\n\r\n      $vue.loading = true;\r\n      this.formattedDate = moment(date1).format(\"YYYY-MM-DD\");\r\n      this.formattedDateFin = moment(date2).format(\"YYYY-MM-DD\");\r\n      var searchType = this.user.rolJefatura || this.user.rolGeneral ? !this.searchFechaGestion : this.searchFechaGestion;\r\n      this.ReporteGeneralService.getCitas(\r\n        this.formattedDate,\r\n        this.formattedDateFin,\r\n        searchType,\r\n        this.searchAll,\r\n        $vue.lazyParams\r\n      ).then((res) => {\r\n        var data = res.data;\r\n        this.citas = data.data;\r\n        this.totalRecords = data.totalRecords;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    getCitasLazy() {\r\n      let $vue = this;\r\n      this.loading = true;\r\n      this.ReporteGeneralService.getCitasLazy($vue.lazyParams).then((res) => {\r\n        var data = res.data;\r\n        this.citas = data.data;\r\n        this.totalRecords =\r\n          data.totalFilter == null ? data.totalRecords : data.totalFilter;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    clearFilter1() {\r\n      this.initFilters1();\r\n      this.getCitasLazy();\r\n    },\r\n    initFilters1() {\r\n      this.search = null;\r\n      this.lazyParams.search = null;\r\n    },\r\n    onPage(event) {\r\n      this.lazyParams = event;\r\n      this.lazyParams.search = this.search;\r\n      this.getCitasLazy();\r\n    },\r\n    onChange() {\r\n      this.lazyParams.search = this.search;\r\n      this.getCitasLazy();\r\n    },\r\n    exportExcel() {\r\n      this.ReporteGeneralService.downloadCitas(this.lazyParams).then(\r\n        (response) => {\r\n          console.log(response);\r\n          let disposition = response.headers[\"content-disposition\"]; // Obtener contenido-disposición\r\n          let fileInfo = disposition\r\n            ? disposition.substr(disposition.indexOf(\"filename\"))\r\n            : \"\";\r\n          let fileName = fileInfo ? fileInfo.split(\"=\")[1] : \"\";\r\n          if (!fileName.substr(fileName.indexOf(\".\"))) {\r\n            this.$notify({\r\n              título: \"Prompt\",\r\n              mensaje: \"No hay datos que desee\",\r\n              type: \"error\",\r\n            });\r\n            return;\r\n          }\r\n          // Procesando archivos de flujo binario\r\n          var blob = new Blob([response.data], {\r\n            type: \"application/x-download;charset=utf-8\",\r\n          });\r\n          var downloadElement = document.createElement(\"a\");\r\n          var href = window.URL.createObjectURL(blob); // Crear enlace de descarga\r\n          downloadElement.href = href;\r\n          downloadElement.download = decodeURIComponent(\r\n            fileName.replace(\"_\", \"\")\r\n          );\r\n          document.body.appendChild(downloadElement);\r\n          downloadElement.click(); // haga clic para descargar\r\n          document.body.removeChild(downloadElement); // Elimina el elemento después de descargar\r\n          window.URL.revokeObjectURL(href);\r\n        }\r\n      );\r\n    }\r\n  },\r\n};\r\n</script>\r\n","import axios from 'axios'\r\n\r\nexport default class ReporteGeneralService {\r\n\r\n    getCitasLazy(dataTableLazy) {\r\n        return axios.post(\"/api/listarCitas\", dataTableLazy).then(res => res)\r\n    }\r\n\r\n    getCitas(formattedDate, formattedDateFin, searchFechaCita,searchAll, dataTableLazy) {\r\n\r\n        return axios.post(\"/api/asyncListarCitas/\" + formattedDate + \"/\" + formattedDateFin + \"/\" + searchFechaCita+\"/\"+searchAll,\r\n            dataTableLazy).then(res =>\r\n                res)\r\n    }\r\n\r\n    downloadCitas(dataTableLazy) {\r\n        return axios.post(\"/api/downloadCitas\", dataTableLazy,{responseType:'blob'}).then(res => res)\r\n    }\r\n}","import { render } from \"./ReporteCitasTel.vue?vue&type=template&id=59deb0e8&class=container\"\nimport script from \"./ReporteCitasTel.vue?vue&type=script&lang=js\"\nexport * from \"./ReporteCitasTel.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n<div>Usuario no existe</div>\r\n  \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  created () {\r\n  },\r\n  watch: {\r\n  },\r\n  props: {\r\n  },\r\n  methods: {\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./Error.vue?vue&type=template&id=ceb3d7ac\"\nimport script from \"./Error.vue?vue&type=script&lang=js\"\nexport * from \"./Error.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}