(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["reporteGeneral"],{"7bfe":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("841c");var n=a("7a23"),i=Object(n["k"])("h3",null,"Citas Telefónicas",-1),c={key:0},l=Object(n["k"])("h5",null,"Si desea buscar todos los registros pulsa aquí:",-1),o={class:"row text-center ml-3 mt-3"},r={class:"col-md-3"},s={class:"col-auto"},d={class:"card mt-3"},u={class:"row g-3"},h={class:"col-auto align-self-start"},b={class:"col-auto"},O={class:"col-auto flex-right"},f={class:"p-input-icon-left"},p=Object(n["k"])("i",{class:"pi pi-search"},null,-1),j=Object(n["j"])(" No existen datos "),C=Object(n["j"])(" Cargando información. Por favor espere. "),k={class:"pi pi-info-circle",style:{fontsize:"2rem"}};function m(e,t,a,m,g,S){var D=Object(n["A"])("Toast"),T=Object(n["A"])("Panel"),v=Object(n["A"])("InputSwitch"),E=Object(n["A"])("Calendar"),y=Object(n["A"])("Button"),R=Object(n["A"])("InputText"),G=Object(n["A"])("Column"),w=Object(n["A"])("DataTable"),N=Object(n["B"])("tooltip");return Object(n["u"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(D),Object(n["k"])(T,null,{default:Object(n["J"])((function(){return[i]})),_:1}),Object(n["k"])(T,null,{default:Object(n["J"])((function(){return[Object(n["k"])("div",null,[Object(n["k"])("h5",null,Object(n["E"])(g.textSearch),1),Object(n["k"])(v,{modelValue:g.searchFechaGestion,"onUpdate:modelValue":t[1]||(t[1]=function(e){return g.searchFechaGestion=e})},null,8,["modelValue"])]),g.user.rolJefatura?(Object(n["u"])(),Object(n["g"])("div",c,[l,Object(n["k"])(v,{modelValue:g.searchAll,"onUpdate:modelValue":t[2]||(t[2]=function(e){return g.searchAll=e})},null,8,["modelValue"])])):Object(n["h"])("",!0),Object(n["k"])("div",o,[Object(n["k"])("div",r,[Object(n["k"])(E,{id:"icon",modelValue:g.DaysSelect,"onUpdate:modelValue":t[3]||(t[3]=function(e){return g.DaysSelect=e}),minDate:g.minDate,maxDate:g.maxDate,showIcon:!0,selectionMode:"range",manualInput:!1,dateFormat:"dd/mm",panelClass:"p-calendar",placeholder:g.searchFechaGestion?"Seleccione Fecha Cita":"Seleccione Fecha Gestión",class:"col-md-12"},null,8,["modelValue","minDate","maxDate","placeholder"])]),Object(n["k"])("div",s,[Object(n["k"])(y,{label:"Enviar",onClick:t[4]||(t[4]=function(e){return S.getCitas()})})])]),Object(n["k"])("div",d,[Object(n["k"])(w,{value:g.citas,dataKey:"id",loading:g.loading,filterDisplay:"menu",paginator:!0,onPage:t[8]||(t[8]=function(e){return S.onPage(e)}),rows:5,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown ",rowsPerPageOptions:[5,10,20,50],responsiveLayout:"scroll",currentPageReportTemplate:" Del {first} al {last} de {totalRecords}",stripedRows:"",ref:"dt",totalRecords:g.totalRecords,lazy:!0,scrollHeight:"600px",class:"p-datatable-sm",rowHover:"",autoLayout:!0},{header:Object(n["J"])((function(){return[Object(n["k"])("div",u,[Object(n["k"])("div",h,[Object(n["k"])(y,{icon:"pi pi-external-link",label:"Export excel",onClick:S.exportExcel},null,8,["onClick"])]),Object(n["k"])("div",b,[Object(n["k"])(y,{type:"button",icon:"pi pi-filter-slash",label:"Clear",class:"p-button-outlined",onClick:t[5]||(t[5]=function(e){return S.clearFilter1()})})]),Object(n["k"])("div",O,[Object(n["k"])("span",f,[p,Object(n["k"])(R,{modelValue:g.search,"onUpdate:modelValue":t[6]||(t[6]=function(e){return g.search=e}),placeholder:"Buscar",onChange:t[7]||(t[7]=function(e){return S.onChange()})},null,8,["modelValue"])])])])]})),empty:Object(n["J"])((function(){return[j]})),loading:Object(n["J"])((function(){return[C]})),paginatorLeft:Object(n["J"])((function(){return[Object(n["k"])(y,{type:"button",icon:"pi pi-refresh",class:"p-button-text"})]})),paginatorRight:Object(n["J"])((function(){return[Object(n["k"])(y,{type:"button",icon:"pi pi-cloud",class:"p-button-text"})]})),default:Object(n["J"])((function(){return[Object(n["k"])(G,{field:"DOCUMENTO",header:"Documento",frozen:""}),Object(n["k"])(G,{field:"TM15NDEUOPE",header:"Operacion"}),Object(n["k"])(G,{field:"TM07SCOSDES",header:"Cosecha"}),Object(n["k"])(G,{field:"MONEDADEUDA",header:"Moneda"}),Object(n["k"])(G,{field:"TM15NDEUCAPINI",header:"Capital Inicial"}),Object(n["k"])(G,{field:"TM15NDEUCAPINI_SOL",header:"Capital Inicial Soles"}),Object(n["k"])(G,{field:"TG01SGENDES_REACT",header:"Reacción"}),Object(n["k"])(G,{field:"TG01SGENDES_CONT",header:"Contacto"}),Object(n["k"])(G,{field:"TG01SGENDES_TIPCONT_ABR",header:"Tipo Contacto"}),Object(n["k"])(G,{field:"CANAL",header:"Canal"}),Object(n["k"])(G,{field:"VSUPERVISOR",header:"Supervisor"}),Object(n["k"])(G,{field:"VGESTOR",header:"Gestor"}),Object(n["k"])(G,{field:"NIVEL",header:"Nivel"}),Object(n["k"])(G,{field:"GESTORGESTION",header:"Gestor Gestión"}),Object(n["k"])(G,{field:"TT01SGESOBS",header:"Observación"},{body:Object(n["J"])((function(e){return[Object(n["K"])(Object(n["k"])("i",k,null,512),[[N,e.data.TT01SGESOBS,void 0,{top:!0}]])]})),_:1}),Object(n["k"])(G,{field:"TM09SDTCVAL_TEL",header:"Teléfono"}),Object(n["k"])(G,{field:"NOMCAMPANA",header:"Campaña"}),Object(n["k"])(G,{field:"TT01DGESFEC",header:"Fecha Gestión"}),Object(n["k"])(G,{field:"TT01DGESCIT",header:"Fecha Cita"}),Object(n["k"])(G,{field:"CALIFICACION",header:"Calificación"}),Object(n["k"])(G,{field:"TT03NMONTOTOTPAGO_MES",header:"Monto Pago Mes"}),Object(n["k"])(G,{field:"TG01SGENDES_ULT_SIT_NEG",header:"Ult. situación de Negociación"}),Object(n["k"])(G,{field:"INTENSIDAD",header:"Intensidad"}),Object(n["k"])(G,{field:"FRECUENCIA",header:"Frecuencia"}),Object(n["k"])(G,{field:"ACCIONRESULCIT",header:"Resultado Acción Cita"}),Object(n["k"])(G,{field:"REACCIONRESULCIT",header:"Resultado Reacción Cita"}),Object(n["k"])(G,{field:"CONTACTORESULTCIT",header:"Resultado Contacto Cita"}),Object(n["k"])(G,{field:"OBSERVACIONRESULCIT",header:"Resultado Observación Cita"}),Object(n["k"])(G,{field:"TELEFONORESULCIT",header:"Resultado Telefono Cita"})]})),_:1},8,["value","loading","totalRecords"])])]})),_:1})],64)}a("1276"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5319");var g=a("cb8b"),S=a("5b2c"),D=a("d4ec"),T=a("bee2"),v=a("bc3a"),E=a.n(v),y=function(){function e(){Object(D["a"])(this,e)}return Object(T["a"])(e,[{key:"getCitasLazy",value:function(e){return E.a.post("/api/listarCitas",e).then((function(e){return e}))}},{key:"getCitas",value:function(e,t,a,n,i){return E.a.post("/api/asyncListarCitas/"+e+"/"+t+"/"+a+"/"+n,i).then((function(e){return e}))}},{key:"downloadCitas",value:function(e){return E.a.post("/api/downloadCitas",e,{responseType:"blob"}).then((function(e){return e}))}}]),e}(),R=a("6b8c"),G=a("c1df"),w=a.n(G),N=a("0393"),P=a("f4ad"),A={components:{Calendar:g["a"],DataTable:S["a"],InputSwitch:P["a"]},directives:{tooltip:R["a"],primeIcons:N["d"]},data:function(){return{DaysSelect:[],minDate:null,maxDate:null,loading:!1,citas:null,search:null,totalRecords:0,formattedDate:null,formattedDateFin:null,searchFechaGestion:!1,searchAll:!1,totalFilter:0,user:{},textSearch:""}},ReporteGeneralService:null,created:function(){var e=new Date;this.minDate=new Date(e.getFullYear(),e.getMonth()-1,1),this.maxDate=new Date(e.getFullYear(),e.getMonth()+1,0),this.ReporteGeneralService=new y;var t=Object(n["m"])();this.user=t.appContext.config.globalProperties.$userSession,this.textSearch=this.user.rolJefatura||this.user.rolGeneral?"Si desea buscar por Fecha de Cita pulsa aquí:":"Si desea buscar por Fecha de Gestión pulsa aquí:"},mounted:function(){this.lazyParams={page:0,rows:this.$refs.dt.rows},this.getCitas()},methods:{getCitas:function(){var e=this,t=this,a=new Date,n=new Date(a.getFullYear(),a.getMonth(),1),i=a;if(0!=t.DaysSelect.length?(n=t.DaysSelect[0],i=t.DaysSelect[1]):(t.DaysSelect[0]=n,t.DaysSelect[1]=i),void 0!=n&&void 0!=i){t.loading=!0,this.formattedDate=w()(n).format("YYYY-MM-DD"),this.formattedDateFin=w()(i).format("YYYY-MM-DD");var c=this.user.rolJefatura||this.user.rolGeneral?!this.searchFechaGestion:this.searchFechaGestion;this.ReporteGeneralService.getCitas(this.formattedDate,this.formattedDateFin,c,this.searchAll,t.lazyParams).then((function(t){var a=t.data;e.citas=a.data,e.totalRecords=a.totalRecords,e.loading=!1}))}},getCitasLazy:function(){var e=this,t=this;this.loading=!0,this.ReporteGeneralService.getCitasLazy(t.lazyParams).then((function(t){var a=t.data;e.citas=a.data,e.totalRecords=null==a.totalFilter?a.totalRecords:a.totalFilter,e.loading=!1}))},clearFilter1:function(){this.initFilters1(),this.getCitasLazy()},initFilters1:function(){this.search=null,this.lazyParams.search=null},onPage:function(e){this.lazyParams=e,this.lazyParams.search=this.search,this.getCitasLazy()},onChange:function(){this.lazyParams.search=this.search,this.getCitasLazy()},exportExcel:function(){var e=this;this.ReporteGeneralService.downloadCitas(this.lazyParams).then((function(t){console.log(t);var a=t.headers["content-disposition"],n=a?a.substr(a.indexOf("filename")):"",i=n?n.split("=")[1]:"";if(i.substr(i.indexOf("."))){var c=new Blob([t.data],{type:"application/x-download;charset=utf-8"}),l=document.createElement("a"),o=window.URL.createObjectURL(c);l.href=o,l.download=decodeURIComponent(i.replace("_","")),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o)}else e.$notify({"título":"Prompt",mensaje:"No hay datos que desee",type:"error"})}))}}};A.render=m;t["default"]=A},dda8:function(e,t,a){"use strict";a.r(t);var n=a("7a23");function i(e,t,a,i,c,l){return Object(n["u"])(),Object(n["g"])("div",null,"Usuario no existe")}var c={created:function(){},watch:{},props:{},methods:{}};c.render=i;t["default"]=c}}]);
//# sourceMappingURL=reporteGeneral.9cc0f642.js.map